# ========================================
# Slack Reminder Bot - 環境変数テンプレート
# ========================================
# このファイルをコピーして .env を作成し、各値を入力してください
# cp .env.example .env

# ========================================
# GCP プロジェクト設定
# ========================================

# GCP プロジェクト ID
# 取得方法: gcloud config get-value project
GCP_PROJECT=your-gcp-project-id

# Cloud Run デプロイリージョン
# 推奨: asia-northeast1（東京）
REGION=asia-northeast1

# Firestore が属する GCP プロジェクト ID（通常は GCP_PROJECT と同じ）
FIRESTORE_PROJECT_ID=your-gcp-project-id

# ========================================
# Firestore コレクション設定
# ========================================

# ワークスペース・テナント情報を保存するコレクション名
FS_COLLECTION_TENANTS=tenants

# メンション監視対象を保存するコレクション名
FS_COLLECTION_MENTIONS=mentions

# ========================================
# アプリケーション設定
# ========================================

# アプリケーションのベースURL（Cloud Runデプロイ後に設定）
APP_BASE_URL=https://your-service.run.app

# OAuth リダイレクト URL
# デプロイ後に自動更新されます。初回は以下のように設定してください。
# 実際のサービス URL は `gcloud run services describe slack-reminder-bot --region asia-northeast1 --format='value(status.url)'` で確認
OAUTH_REDIRECT_URL=https://your-service.run.app/slack/oauth_redirect

# ========================================
# Secret Manager 設定
# ========================================
# ⚠️ Slack認証情報は全てSecret Managerに保存されます
# .envファイルには記載不要です
#
# 必要なSecret（GCP Secret Managerに登録）:
# - slack-signing-secret: Slack App の Signing Secret
# - slack-client-id: Slack App の Client ID
# - slack-client-secret: Slack App の Client Secret
# - oauth-state-secret: OAuth State用のランダム文字列
#
# 登録方法は GCP_SETUP.md を参照してください

# Slack Bot Token を保存する際のプレフィックス（通常は変更不要）
SECRET_TOKEN_PREFIX=slack_token_

# ========================================
# Cloud Tasks 設定
# ========================================
# Cloud Tasks キューの完全なリソース名

# 10分後のリマインドジョブキュー
# 形式: projects/{PROJECT_ID}/locations/{REGION}/queues/{QUEUE_NAME}
TASKS_QUEUE_REMIND=projects/your-gcp-project-id/locations/asia-northeast1/queues/remind-queue

# 30分後のエスカレーションジョブキュー
TASKS_QUEUE_ESCALATE=projects/your-gcp-project-id/locations/asia-northeast1/queues/escalate-queue

# Cloud Tasks が OIDC トークンを発行する際の対象
# = Cloud Run サービスの URL（デプロイ後に自動設定）
TASKS_AUDIENCE=https://your-service.run.app

# Cloud Tasks が使用するサービスアカウント
# 形式: {SERVICE_ACCOUNT}@{PROJECT_ID}.iam.gserviceaccount.com
TASKS_SERVICE_ACCOUNT=slack-bot-service@your-gcp-project-id.iam.gserviceaccount.com

# ========================================
# タイミング設定
# ========================================

# メンション後、リマインドを送信するまでの時間
# 形式: Go duration（例: 10m, 5m30s）
REMIND_AFTER=10m

# メンション後、エスカレーション（再通知＋上長DM）を送信するまでの時間
ESCALATE_AFTER=30m
